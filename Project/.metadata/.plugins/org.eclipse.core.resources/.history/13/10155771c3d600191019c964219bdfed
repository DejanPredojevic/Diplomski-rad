package controller;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import javax.swing.JFileChooser;
import javax.swing.filechooser.FileSystemView;

import util.Singleton;

public class FileChooser implements ActionListener {

	@Override
	public void actionPerformed(ActionEvent e) {
		// TODO Auto-generated method stub
		JFileChooser jfc = new JFileChooser(FileSystemView.getFileSystemView().getHomeDirectory());
		//JFileChooser chooser = new JFileChooser();
		jfc.setMultiSelectionEnabled(true);
		
		int returnValue = jfc.showOpenDialog(null);
		// int returnValue = jfc.showSaveDialog(null);
		
		if (returnValue == JFileChooser.APPROVE_OPTION) {
			File[] selectedFile = jfc.getSelectedFiles();
			File[] oldFiles = Singleton.getInstance().getFiles().getFiles();
			ArrayList<File> l = null;
			if(oldFiles != null) {
		        l = new ArrayList<>();
		        for (int i = 0; i < (selectedFile.length > oldFiles.length ? selectedFile.length : oldFiles.length); i++) {
		            if (i < selectedFile.length) {
		                int c = 0;
		                while (c <= l.size()) {
		                    if (l.contains(selectedFile[i]) == false) {
		                        l.add(selectedFile[i]);
		                    }
		                    c++;
		                }
		            }
		            if (i < oldFiles.length) {
		                int c = 0;
		                while (c <= l.size()) {
		                    if (l.contains(oldFiles[i]) == false) {
		                        l.add(oldFiles[i]);
		                    }
		                    c++;
		                }
	
		            }
		        }
			}
	        System.out.println(l);
			//Singleton.getInstance().getFiles().setFiles();
		}
		
		Singleton.getInstance().getFiles().toString();
	}

}
